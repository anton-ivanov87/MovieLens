---
title: "MovieLens  \nCreating a movie recommendation system"
author: "Anton Ivanov"
date: "`r format(Sys.Date())`"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 1 Introduction

In this project, we will be creating a movie recommendation system using the [10M version of the MovieLens dataset](https://grouplens.org/datasets/movielens/10m/).
This dataset contains 10 million ratings for about 10,000 movies from 72,000 users.

Recommendation systems make specific recommendations based on ratings from users to items. They are of particular importance in the modern world, since they allow companies such as online shops or streaming services to recommend users matching goods or content, providing higher profits. 

The goal of the project is to predict a rating for a specific movie from a specific user, based on the available ratings.
The used ratings is as following: one star suggests it is not a good movie, whereas five stars suggest it is an excellent movie.

Since in the dataset only 10 million ratings are available out of potential 78 million (if every user would rate every movie), about 86% of ratings remain unknown and have to be predicted.

The recommendation system will be based on a linear model containing movie, user, genre and time effects. Each effect will be considered step-by-step, using a training and test sets for evaluation of the model performance. Regularization of the effects will be then implemented to improve the performance. After final tuning of the model it will be applied to the validation set to get the final performance.

## 2 Analysis and Methods

In the following, the movielens dataset will be analysed in detail.

The dataset contains 6 columns: user id, movie id, rating (0.5 - 5 stars), time stamp (as number of seconds after 1st January 1970), title of the movie and genre of the movie. Each row represents a rating by one user to one movie. These are the first 10 rows of the dataset:

```{r small dataset, message=FALSE}
library(tidyverse)
load("movielens_s.RData")
as_tibble(movielens_s)
```
Each movie is rated by a different number of users since some movies are more popular and others are less popular. It can be seen in the following plot.

```{r movie ratings number, echo=FALSE}
load("movielens.RData")
movielens %>%
  group_by(movieId) %>%
  summarize(n = n()) %>%
  ggplot(aes(n)) + 
  geom_bar()
```








The data is split into two subsets, whereas 10% of it are used for the validation of the recommendation system and 90% are used for creation of the system.

Code


The resulting subset with 90% of data is split again into the training set (80%) and test set (20%).

Code






## 3 Results





## 4 Conclusion
